#include <stdio.h>

#define P 5
#define R 3

int alloc[P][R] = {
    {0,1,0},{2,0,0},{3,0,2},{2,1,1},{0,0,2}
};
int max[P][R] = {
    {7,5,3},{3,2,2},{9,0,2},{2,2,2},{4,3,3}
};
int avail[R] = {3,3,2};
int need[P][R];

int is_safe() {
    int work[R], finish[P]={0}, seq[P], k=0;
    for(int i=0;i<R;i++) work[i]=avail[i];

    while(k<P){
        int found=0;
        for(int p=0;p<P;p++){
            if(!finish[p]){
                int ok=1;
                for(int r=0;r<R;r++)
                    if(need[p][r] > work[r]) ok=0;
                if(ok){
                    for(int r=0;r<R;r++) work[r]+=alloc[p][r];
                    seq[k++]=p;
                    finish[p]=1;
                    found=1;
                }
            }
        }
        if(!found) return 0;
    }

    printf("Safe sequence: ");
    for(int i=0;i<P;i++) printf("P%d ",seq[i]);
    printf("\n");
    return 1;
}

int main() {
    for(int i=0;i<P;i++)
        for(int j=0;j<R;j++)
            need[i][j] = max[i][j] - alloc[i][j];

    if(!is_safe()) printf("System is NOT safe\n");
    return 0;
}
 ex 9 bankersÂ algorithm
